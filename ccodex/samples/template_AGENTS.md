# AGENTS.md作成手順書・テンプレート

## このファイルについて

このファイルは、コーディングエージェントが `AGENTS.md` を作成するためのテンプレートです。

`AGENTS.md` は、このリポジトリでコーディングエージェントが作業するときのルール、作業の進め方、ディレクトリの役割、禁止事項などをまとめた「最優先のガイドライン」です。

このファイルを参考につくること。
すべての項目を反映すること（`template_AGENTS.md` のテンプレ本体にある章は、すべて `AGENTS.md` に入れる）。
作成用の指示項目は `AGENTS.md` に書いてはいけないこと（この説明文や「確認項目・注意点」など）。

## 作成方針（対話的に作成）

`AGENTS.md` は対話的に作成する。いきなり本文を書き始めず、まず大筋（章立て・方針・用語の定義）を会話で整理して合意してから、`AGENTS.md` を書く。
その後、足りない情報は質問で回収して追記・修正して完成させる。

詳細:
- 最重要: 1回の質問で詰め込みすぎない（まとめて質問してよいが、相手が回答しやすい量に抑える）。
- 回収する情報カテゴリ（最終的に欠けがない状態にする）:
  - ディレクトリ構造（言語・主要ライブラリ/フレームワークを含む）
  - プロジェクトの目的
  - 細かい部分（規約、テスト、セキュリティ、運用の例外など）
- 進め方:
  - 質問の順番は固定しない。相手が答えやすい流れに並べる。
  - 「目的」など長くなりやすいテーマは段階的に聞く（短い要約→補足質問）。
- 仮置き:
  - 不確定な点は TODO として明示し、後続の質問で埋める。

## 生成されるAGENTS.mdの要件

このテンプレートから生成する `AGENTS.md` は、次の要件を満たすこと。

- このファイルのように、最初に概要を書き、その後に詳細を書く。
- 過剰な箇条書きをしない（一覧・手順の説明で活用すること）。
- テンプレート本文中の `TODO:` は記入欄であり、生成する `AGENTS.md` には `TODO:` を残さず、リポジトリ固有の内容で置き換える。
- 禁止事項は、参照（「継承する」等）で済ませず、`AGENTS.md` 本文に全文を列挙する。
- テスト/検証コマンド欄は「人間向けの参考情報」として記載する（エージェントが自動で実行する前提の手順として書かない）。

## 生成後の最終確認
生成した `AGENTS.md` を見直して、テンプレートの要件を満たしているかを確認する。

- テンプレート本文中の `TODO:` を残さず、リポジトリ固有の内容で置き換える。
- 生成する `AGENTS.md` に「AGENTS.md作成時の注意点（AGENTS.mdには入れない）」の節を入れない。
- テンプレート本文の章（見出し）を省略しない。

------

ここから下がテンプレート本文（生成される `AGENTS.md` に入れる内容や注意点）です。

------

# リポジトリ ガイドライン

## 最優先条件
本リポジトリに関する文章および対話（仕様/設計/レポート/日々の記録/エージェントへの指示/人間への回答など）は、原則として日本語で記述する。

文字化け回避のため、絵文字や装飾用の特殊なUnicode記号は使わず、通常の日本語文字とASCII中心で書く。

不明点がある場合は、勝手に決めずに確認する（ただし「質問しないで作って」と指示された場合の扱いは別途定義する）。

## プロジェクトの目的
TODO: 以下の「AGENTS.md作成時の注意点」をもとに、リポジトリの目的を記録する（この章は、このリポジトリで「何を作るか」「何を作らないか」を短く明文化し、判断基準にする）。

### AGENTS.md作成時の注意点（AGENTS.mdには入れない）
目的文に最低限含める（例）:
- 何を最終成果物とするか（例: アプリ/ライブラリ、レポート/資料、データ、など）。
- 必要なら、目的文に出てくる「このリポジトリ固有の用語」を定義する（一般用語の定義は不要）。

## ディレクトリ構造
この章はリポジトリの地図であり、「どこに何があるか」と「どの情報をどこに置くか」を説明する。
ディレクトリの役割と配置ルールは、この章に集約して明文化する。
リポジトリの構造が変わった場合は、この章を更新して最新状態に保つ。

TODO: 以下のディレクトリの説明を完成させる（各行は「パス: 短い呼び名 + 役割/中身 + 必要なら選択肢」の順で書く）。

ベースライン（TODO: 必要に応じて追加/削除して調整する）:
- `src/`: 実装本体。コードがある場合の本体。言語・構成に合わせて決める。（選択肢: `app/`, `packages/`）
- `reports/`: 成果物ディレクトリ。最終アウトプットとして残す文書。文書プロジェクトでは `src/` に近い。

- `docs/`: ドキュメントディレクトリ。文書作成（=開発）を進めるための文書を置く。成果物（最終アウトプット）は置かない。配下のファイル名・ディレクトリ名は日本語を基本にする（記号的なものを除く）。
- `docs/spec/`: 仕様。近い機能の仕様はまとめてよい。配下のファイル名・ディレクトリ名は日本語を基本にする。
- `docs/how_to/`: 手順。`how_to_<項目名>.md` の形式で作成する（`<項目名>` は日本語）。
- `docs/coding_rule/`: コーディング規約。言語別の規約、命名、フォーマット、例外方針などを整理して置く。
- `docs/directory_structure.md`: ディレクトリ・ファイル一覧とファイルの探し方。`# ディレクトリ・ファイル一覧` の下に `<ディレクトリパスもしくはファイルパス>: 説明` を列挙し、続けて `# ファイルの探し方` に探し方の方針を書く。実装系・ドキュメント系は網羅し、作業系や一時系、コミット対象外のものは書かない。
- `docs/web/`: 外部参照ログ。外部情報の参照記録。コミット可否と取り扱いルールを明記する。（選択肢: `_data/web/`）

- `_data/`: データ。データファイルなど。コミット可否と取り扱いルールを明記する。
- `tests/`: テスト。テストコード。無い場合でも将来の置き場として宣言する。
- `scripts/`: 補助スクリプト。取得/変換/補助など。必要がなければ省略してよい。
- `_worklist/`: TODOディレクトリ。TODO/進捗/決定事項/未決/確認手順。作業単位で更新する。
- `_notes/`: 検討ログ。下書き/途中経過。コミット可否はリポジトリ方針で決める。配下のファイル名・ディレクトリ名は日本語を基本にする。ファイル名は `_notes/YYYYMMDD-hhmmss-<topic>.md`（日本時間/JST）とし、時刻は `TZ=Asia/Tokyo date +%Y%m%d-%H%M%S` で取得する。`<topic>` は日本語でよい（ただしスペース等の事故りやすい文字は避ける）。（選択肢: `notes/`）
- `_local/`: ローカル補助。ローカル専用。コミットしない。他のファイル（`docs/` 等）から言及しない。
- `_tmp/`: 一時領域。一時ファイル等を置く（コミット対象外）。
- `_cache/`: キャッシュ。`uv` のキャッシュ等を置く（コミット対象外）。
- `_outputs/`: 出力先。生成物を置く（コミット対象外）。

### AGENTS.md作成時の注意点（AGENTS.mdには入れない）
書き方:
- 各行は「パス: 短い呼び名。役割/中身。必要なら（選択肢: ...）。」の形にする（「または」を本文に混ぜない）。
- ディレクトリ構造の詳細な正のソースが別にある場合は、パスを明記する（例: `docs/directory_structure.md`）。

記載の条件:
- 開発プロジェクト（ソフトウェア開発）が主の場合のみ `src/`（または `app/`, `packages/`）を記載する。
- 調査プロジェクト（文書作成）が主の場合のみ `reports/` を記載する。
- 両方ある場合は `src/` と `reports/` を両方記載してよい（役割の違いを明確に書く）。

## 禁止事項・非推奨事項
この章は、本リポジトリで作業するコーディングエージェント向けの禁止事項を列挙する。
ここに書かれている禁止事項は、常に守る。

禁止事項:
- 破壊的な操作は、明示的な指示がない限り行わない（例: `rm -rf`、`git reset --hard`、`git clean -fdx`）。
- `cat > file` 等でファイルを更新しない（過去の内容を失う可能性がある）。ファイル更新は差分が残る手段で行う。
- 秘匿情報（APIキー/トークン/パスワード等）をコミットしない。`.env` 等の秘匿情報を含みうるファイルは、指示がない限り読み込まない（例: `.env`, `.env.*`, 認証情報ファイル）。秘匿情報を含む可能性がある値は、本文・ログ・例・コマンドにも書かない。
- ソースコードやレポートにメタ発言（コーディングエージェントと人間の会話に対するコメント等）を書かない。
- コミット/プッシュ/PR作成は、明示的な指示がない限り行わない。
- コミット対象外のディレクトリについては、必要がなければコミット対象ファイルが言及してはいけない。

非推奨事項:
- `git` コマンドの乱用は避ける。コミットされていない変更が多い運用では、差分や履歴を見ても実態を正しく反映しないことがある。

## 基本ワークフロー（docs/ + _worklist 方式）
本リポジトリでは、作業の進め方を `docs/` と `_worklist/` に集約する。
`docs/` は仕様・設計・意思決定など「作業の判断基準」を置く場所であり、`_worklist/` は TODO と進捗のログを置く場所である。

進め方（基本）:
1. 変更に着手する前に、必要なら `docs/` を更新して前提・仕様・判断基準を揃える。
2. 変更に着手する場合は、必ず `_worklist/` に作業ログを作る（例外なし）。小さい変更でも作業ログを残す。
3. 作業中は `_worklist/` を更新し続ける（TODO、決定事項、未決、確認手順、方針変更、取り下げ、など）。
4. 実装（成果物）とドキュメントが食い違う場合は、独断でどちらを正とするか決めず、確認してから直す。
5. 変更によって `docs/` の内容（仕様、手順、コーディング規約、ディレクトリ構造）が古くなる場合は、関連ドキュメントを更新して整合させる（例: `docs/directory_structure.md`）。

`_worklist/` の作り方:
- 1作業につき `_worklist/YYYYMMDD-hhmmss-<topic>.md` を1つ作る（日本時間/JST）。
- 時刻は `TZ=Asia/Tokyo date +%Y%m%d-%H%M%S` で取得すること。
- `<topic>` は日本語でよい（ただしスペース等の事故りやすい文字は避ける）。
- 作業ログには最低限、TODO/決定事項/未決/確認手順を含める。
- 変更する予定の主要パス（例: `docs/`, `_worklist/`, `src/`）は、早い段階で作業ログに列挙する。

Done（完了条件）:
- `docs/`（仕様・判断基準）と、実装や成果物の内容が一致している。
- `_worklist/` が最新の状態を反映している（完了、方針変更、取り下げを含む）。
- 追加で確認が必要な場合は、その確認手順が `_worklist/` に残っている（人間向けの参考）。

### AGENTS.md作成時の注意点（AGENTS.mdには入れない）
このリポジトリで `docs/` や `_worklist/` とは別のパスや運用を採用する場合は、この章の文章と例（パス、ファイル名規則、更新ルール、Done定義）を、その運用に合わせて修正すること。
